"use strict";var aviaJS=aviaJS||{};!function(){if(!aviaJS.aviaModalDynamic){class aviaModalDynamic{obj_modal=null;modal=null;dynChars=null;dynLists=null;dynSelects=null;attached=!1;constructor(e){this.obj_modal=e,this.obj_modal.modal.length&&(this.modal=this.obj_modal.modal[0],this.modal.addEventListener("aviaModalWindowOpen",this.onAviaModalWindowOpen.bind(this)))}bindEvents(){if(this.dynLists=this.modal.getElementsByClassName("av-dynamic-select"),this.dynLists.length){for(let e=0;e<this.dynLists.length;e++)this.dynLists[e].addEventListener("mousedown",this.onDynListsMousedown.bind(this)),this.dynLists[e].addEventListener("mouseleave",this.onDynListsMouseleave.bind(this));this.dynChars=this.modal.getElementsByClassName("avia-dynamic-char");for(let e=0;e<this.dynChars.length;e++)this.dynChars[e].addEventListener("mousedown",this.onDynCharsMousedown.bind(this));this.dynSelects=this.modal.getElementsByClassName("av-dynamic-select-element");for(let e=0;e<this.dynSelects.length;e++)this.dynSelects[e].addEventListener("mousedown",this.onDynSelectElementMousedown.bind(this))}}onAviaModalWindowOpen(e){this.attached||(this.bindEvents(),this.attached=!0)}onDynCharsMousedown(e){e.preventDefault(),e.stopPropagation();let t=e.target.closest(".avia-dynamic-select-container").getElementsByClassName("av-dynamic-select");t.length&&t[0].classList.add("av-dyn-select-visible")}onDynListsMousedown(e){e.preventDefault(),e.stopPropagation()}onDynListsMouseleave(e){e.preventDefault(),e.stopPropagation(),e.target.classList.remove("av-dyn-select-visible")}onDynSelectElementMousedown(e){e.preventDefault(),e.stopPropagation();let t=e.target,n=JSON.parse(t.dataset.dynamic),s=t.closest(".avia-form-element"),a=t.closest(".av-dynamic-select"),i=null,l=a.classList.contains("av-dynamic-clear");if(i=s.getElementsByTagName("input"),i.length||(i=s.getElementsByTagName("textarea")),i.length){if(l)i[0].value=n;else if(i[0]===document.activeElement){let e=i[0].selectionStart>i[0].selectionEnd?i[0].selectionStart:i[0].selectionEnd;0==e?i[0].value=n+i[0].value:e>=i[0].value.length?i[0].value+=n:i[0].value=i[0].value.substring(0,e)+n+i[0].value.substring(e)}else i[0].value+=n;a.style["pointer-events"]="none",setTimeout((function(){a.style["pointer-events"]=""}),500),i[0].dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0}))}}}aviaJS.aviaModalDynamic=function(e){return new aviaModalDynamic(e)}}}();